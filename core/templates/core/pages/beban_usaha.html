{% extends "base.html" %}
{% load static %}
{% block title %}Dashboard - Beban Usaha{% endblock %} {# Corrected Title #}

{% block content %}
<div class="bg-white text-slate-800">
  <div class="flex gap-6">

    {% include 'core/partials/side_menu.html' %}

    <main id="main-content" class="flex-1">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">Beban Usaha</h1>
        <button
          id="add-beban-btn"
          class="bg-[#4A5C51] text-white font-semibold py-2 px-6 rounded-lg hover:bg-[#3a4a40]"
        >
          TAMBAH
        </button>
      </div>
      <div class="bg-white rounded-2xl p-8 shadow-sm">
        <h2 class="text-xl font-bold mb-4 text-center">BEBAN USAHA</h2>
        <div
          class="grid grid-cols-8 gap-4 bg-slate-100 p-4 rounded-lg mb-2 text-slate-600 font-semibold"
        >
          {# Added Remove column placeholder visually, JS handles button placement #}
          <div class="col-span-1">Nomor</div>
          <div class="col-span-3">Jenis Beban Usaha</div>
          <div class="col-span-2">Keterangan</div>
          <div class="col-span-2">Total Biaya (Rp)</div> {# Added Rp #}
        </div>
        <div id="beban-usaha-rows" class="space-y-2">
            {# Rows added by JS #}
        </div>
        <div class="text-right font-bold text-lg mt-6">
          Jumlah Beban Usaha <span id="jumlah-beban-usaha">Rp 0</span>
        </div>

        <hr class="my-10 border-slate-200" /> {# Added border style #}

        <h2 class="text-xl font-bold mb-4 text-center">BEBAN LAIN LAIN</h2>
        <div
          class="grid grid-cols-8 gap-4 bg-slate-100 p-4 rounded-lg mb-2 text-slate-600 font-semibold"
        >
          {# Added Remove column placeholder visually #}
          <div class="col-span-1">Nomor</div>
          <div class="col-span-3">Jenis Beban</div> {# Simplified header #}
          <div class="col-span-2">Keterangan</div>
          <div class="col-span-2">Total Biaya (Rp)</div> {# Added Rp #}
        </div>
        <div id="beban-lain-rows" class="space-y-2">
            {# Rows added by JS #}
        </div>
        <div class="text-right font-bold text-lg mt-6">
          Jumlah Beban Lain Lain <span id="jumlah-beban-lain">Rp 0</span>
        </div>

        <div class="text-right mt-16">
           {# Consider adding functionality or linking this button #}
          <button
            class="py-3 px-12 bg-[#8C705A] text-white font-semibold rounded-lg hover:bg-[#a1826a]"
            onclick="window.location.href='{% url 'core:laporan' %}'" {# Example: Link to next page #}
          >
            Next
          </button>
        </div>
      </div>
    </main>
  </div>

  {# --- MODAL --- #}
  <div
    id="add-beban-modal"
    class="fixed inset-0 bg-black/60 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
      <form id="beban-form">
        <div class="mb-5">
          <label
            for="modal-nomor"
            class="block mb-2 font-semibold text-slate-600"
            >Nomor Referensi</label {# Clarified label #}
          ><input
            type="text"
            id="modal-nomor"
            placeholder="Contoh: INV/001, Nota/A1" {# Added placeholder #}
            class="w-full p-3 border border-slate-300 rounded-lg"
            required {# Added required #}
          />
        </div>
        <div class="mb-5">
          <label
            for="modal-jenis-beban"
            class="block mb-2 font-semibold text-slate-600"
            >Jenis Beban</label {# Simplified label #}
          >
          <select
            id="modal-jenis-beban"
            class="w-full p-3 border border-slate-300 rounded-lg bg-white appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
            required {# Added required #}
          >
            <option value="">Pilih Jenis Beban</option>
            <option value="Biaya Sewa">Biaya Sewa</option>
            <option value="Biaya Transportasi">Biaya Transportasi</option>
            <option value="Biaya Air dan Listrik">Biaya Air dan Listrik</option>
            <option value="Biaya Pinjaman">Biaya Pinjaman</option>
            <option value="Biaya Penyusutan">Biaya Penyusutan</option>
            <option value="Biaya Gaji Karyawan">Biaya Gaji Karyawan</option> {# Added option #}
            <option value="Biaya Pemasaran">Biaya Pemasaran</option> {# Added option #}
            <option value="Biaya Administrasi Bank">Biaya Administrasi Bank</option> {# Added option #}
            <option value="Biaya Lainnya">Biaya Lainnya</option>
          </select>
        </div>
        <div class="mb-5">
          <label
            for="modal-keterangan"
            class="block mb-2 font-semibold text-slate-600"
            >Keterangan</label
          ><input
            type="text"
            id="modal-keterangan"
            placeholder="Contoh: Sewa ruko bulan Okt, Gaji staff" {# Updated placeholder #}
            class="w-full p-3 border border-slate-300 rounded-lg"
            required {# Added required #}
          />
        </div>
        <div class="mb-5">
          <label
            for="modal-total-biaya"
            class="block mb-2 font-semibold text-slate-600"
            >Total Biaya</label
          ><input
            type="number"
            id="modal-total-biaya"
            placeholder="Rp" {# Updated placeholder #}
            class="w-full p-3 border border-slate-300 rounded-lg"
            min="0" {# Added min value #}
            required {# Added required #}
          />
        </div>
        <div class="mb-8">
          <label
            for="modal-jenis-data"
            class="block mb-2 font-semibold text-slate-600"
            >Kelompok Beban</label {# Clarified label #}
          ><select
            id="modal-jenis-data"
            class="w-full p-3 border border-slate-300 rounded-lg bg-white appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
            required {# Added required #}
          >
            <option value="beban_usaha">Beban Usaha</option>
            <option value="beban_lain">Beban Lain Lain</option>
          </select>
        </div>
        <button
          type="submit"
          class="w-full bg-[#4A5C51] text-white p-3 rounded-lg font-semibold text-lg mt-4 hover:bg-[#3a4a40]"
        >
          Selesai & Tambah Data
        </button>
      </form>
    </div>
  </div>

  {# --- ALERTS --- #}
  <div
    id="success-alert"
    class="fixed inset-0 bg-black/40 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center">
      <svg
        class="w-16 h-16 text-green-500 mx-auto mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <p class="text-lg font-semibold">Data beban berhasil ditambahkan</p> {# Updated message #}
    </div>
  </div>
  <div
    id="error-alert"
    class="fixed inset-0 bg-black/40 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center">
      <svg
        class="w-16 h-16 text-red-500 mx-auto mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
        />
      </svg>
      <p class="text-lg font-semibold">
        Gagal menambahkan data!<br />Pastikan semua field terisi.
      </p> {# Updated message #}
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'core/js/beban_usaha.js' %}"></script>
{% endblock %}