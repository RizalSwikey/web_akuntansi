{% extends "base.html" %}
{% load static %}
{% block title %}Dashboard - Profile Perusahaan{% endblock %}

{% block content %}
<div class="flex h-screen">

  {% include 'core/partials/sidebar.html' %}

  <main id="main-content" class="flex-1 p-8 overflow-y-auto">
    <h1 class="text-3xl font-bold mb-6">Profile Perusahaan</h1>
    
    {% if messages %}
      {% for message in messages %}
        <div
          class="{% if message.tags == 'success' %}bg-green-100 border-green-400 text-green-700{% elif message.tags == 'error' %}bg-red-100 border-red-400 text-red-700{% else %}bg-blue-100 border-blue-400 text-blue-700{% endif %} border px-4 py-3 rounded-lg relative mb-6"
          role="alert"
        >
          <span class="block sm:inline">{{ message }}</span>
        </div>
      {% endfor %}
    {% endif %}

    <form method="POST" action="{% url 'core:profile' report.id %}" class="bg-white p-8 rounded-2xl shadow-lg space-y-6">
      {% csrf_token %}
      
      <div class="mb-8">
        <label
          for="company_name"
          class="block font-semibold mb-2"
          >Nama Perusahaan</label
        ><input
          type="text"
          id="company_name"
          name="company_name"
          class="w-full p-3 border border-slate-300 rounded-lg focus:border-slate-400 outline-none"
          placeholder="Masukkan Nama Perusahaan"
          value="{{ report.company_name | default:'' }}"
          required
        />
      </div>
      <div class="flex flex-wrap gap-8 mb-8">
        <div class="flex-1 min-w-[150px]">
          <label for="month" class="block mb-2 font-semibold"
            >Bulan Laporan</label
          >
          <select
            id="month"
            name="month"
            class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
          >
            {% with current_month=report.month|default:'' %}
            <option value="Januari" {% if current_month == 'Januari' %}selected{% endif %}>Januari</option>
            <option value="Februari" {% if current_month == 'Februari' %}selected{% endif %}>Februari</option>
            <option value="Maret" {% if current_month == 'Maret' %}selected{% endif %}>Maret</option>
            <option value="April" {% if current_month == 'April' %}selected{% endif %}>April</option>
            <option value="Mei" {% if current_month == 'Mei' %}selected{% endif %}>Mei</option>
            <option value="Juni" {% if current_month == 'Juni' %}selected{% endif %}>Juni</option>
            <option value="Juli" {% if current_month == 'Juli' %}selected{% endif %}>Juli</option>
            <option value="Agustus" {% if current_month == 'Agustus' %}selected{% endif %}>Agustus</option>
            <option value="September" {% if current_month == 'September' %}selected{% endif %}>September</option>
            <option value="Oktober" {% if current_month == 'Oktober' %}selected{% endif %}>Oktober</option>
            <option value="November" {% if current_month == 'November' %}selected{% endif %}>November</option>
            <option value="Desember" {% if current_month == 'Desember' %}selected{% endif %}>Desember</option>
            {% endwith %}
          </select>
        </div>
        <div class="flex-1 min-w-[150px]">
          <label for="year" class="block mb-2 font-semibold"
            >Tahun Laporan</label
          >
          <select
            id="year"
            name="year"
            class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
          >
            {% with current_year=report.year|stringformat:"s"|default:'' %}
            <option value="2024" {% if current_year == '2024' %}selected{% endif %}>2024</option>
            <option value="2025" {% if current_year == '2025' %}selected{% endif %}>2025</option>
            <option value="2026" {% if current_year == '2026' %}selected{% endif %}>2026</option>
            <option value="2027" {% if current_year == '2027' %}selected{% endif %}>2027</option>
            {% endwith %}
          </select>
        </div>
      </div>
      <div class="mb-8">
        <label
          for="business_status"
          class="block text-slate-600 font-semibold mb-2"
          >Status usaha</label
        >
        <select
          id="business_status"
          name="business_status"
          class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;">
          {% with status=report.business_status|default:'' %}
          <option value="">Pilih Status</option>
          <option value="orang_pribadi" {% if status == 'orang_pribadi' %}selected{% endif %}>Orang Pribadi</option>
          <option value="badan_usaha" {% if status == 'badan_usaha' %}selected{% endif %}>Badan Usaha (CV/PT)</option>
          {% endwith %}
        </select>
      </div>
      <div id="ptkp-field-wrapper" class="mb-8 {% if report.business_status != 'orang_pribadi' %}hidden{% endif %}">
        <label
          for="ptkp-status"
          class="block text-slate-600 font-semibold mb-2"
          >Status PTKP</label
        >
         <select
          id="ptkp-status"
          name="ptkp_status"
          class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
        >
          {% with ptkp_status=report.ptkp_status|default:'' %} 
          <option value="">Pilih Status PTKP</option>
          <option value="TK/0" {% if ptkp_status == 'TK/0' %}selected{% endif %}>TK/0</option>
          <option value="TK/1" {% if ptkp_status == 'TK/1' %}selected{% endif %}>TK/1</option>
          <option value="TK/2" {% if ptkp_status == 'TK/2' %}selected{% endif %}>TK/2</option>
          <option value="TK/3" {% if ptkp_status == 'TK/3' %}selected{% endif %}>TK/3</option>
          <option value="K/0" {% if ptkp_status == 'K/0' %}selected{% endif %}>K/0</option>
          <option value="K/1" {% if ptkp_status == 'K/1' %}selected{% endif %}>K/1</option>
          <option value="K/2" {% if ptkp_status == 'K/2' %}selected{% endif %}>K/2</option>
          <option value="K/3" {% if ptkp_status == 'K/3' %}selected{% endif %}>K/3</option>
          <option value="K/I/0" {% if ptkp_status == 'K/I/0' %}selected{% endif %}>K/I/0</option>
          <option value="K/I/1" {% if ptkp_status == 'K/I/1' %}selected{% endif %}>K/I/1</option>
          <option value="K/I/2" {% if ptkp_status == 'K/I/2' %}selected{% endif %}>K/I/2</option>
          <option value="K/I/3" {% if ptkp_status == 'K/I/3' %}selected{% endif %}>K/I/3</option>
          {% endwith %}
        </select>
      </div>
      <div class="mb-8">
        <label
          for="umkm_incentive"
          class="block text-slate-600 font-semibold mb-2"
          >Sudah daftar insentif pajak UMKM</label
        >
        <select
          id="umkm_incentive"
          name="umkm_incentive"
          class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;">
          {% with umkm=report.umkm_incentive|default:'' %}
            <option value="">Pilih Jawaban</option>
          <option value="Sudah" {% if umkm == 'Sudah' %}selected{% endif %}>Sudah</option>
          <option value="Belum" {% if umkm == 'Belum' %}selected{% endif %}>Belum</option>
          {% endwith %}
        </select>
      </div>
      <div class="mb-8">
        <label for="omzet" class="block mb-2 font-semibold">Omzet melebihi 500 juta?</label>
        <select id="omzet_status" name="omzet_status" class="w-full p-3 border border-slate-300 rounded-lg">
          <option value="tidak" {% if report.omzet_status == 'tidak' %}selected{% endif %}>Tidak</option>
          <option value="iya" {% if report.omzet_status == 'iya' %}selected{% endif %}>Iya</option>
        </select>
      </div>
      <div class="mb-8">
        <label
          for="business_type"
          class="block text-slate-600 font-semibold mb-2"
          >Jenis usaha</label
        >
        <select
          id="business_type"
          name="business_type"
          class="w-full p-3 border border-slate-300 rounded-lg bg-transparent outline-none appearance-none" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;"
          required>
          {% with btype=report.business_type|default:'' %}
          <option value="">Pilih Jenis Usaha</option>
          <option value="dagang" {% if btype == 'dagang' %}selected{% endif %}>Dagang</option>
          <option value="manufaktur" {% if btype == 'manufaktur' %}selected{% endif %}>Manufaktur</option>
          {% endwith %}
        </select>
      </div>
      <div class="pt-4 flex justify-end">
        <button
          type="submit"
          class="bg-black text-white py-3 px-8 rounded-lg font-semibold text-lg hover:bg-slate-800"
        >
          Simpan Profil & Lanjut &rarr;
        </button>
      </div>
    
    </form>
  </main>
</div>

{% endblock %}


{% block extra_js %}
<script src="{% static 'core/js/profile.js' %}"></script>

{% endblock %}