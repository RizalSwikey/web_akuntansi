{% extends "base.html" %} 
{% load static %} 
{% block title %}Dashboard - Profile Perusahaan{% endblock %} 

{% block content %}
<div class="bg-white text-slate-800">
  <div class="flex gap-6">

    {% include 'core/partials/side_menu.html' %}
    
    <main id="main-content" class="flex-1">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">Pendapatan</h1>

        <button
          id="add-income-btn"
          class="bg-[#4A5C51] text-white font-semibold py-2 px-6 rounded-lg hover:bg-[#3a4a40]"
        >
          TAMBAH
        </button>
      </div>
      <div class="bg-white rounded-2xl p-8 shadow-sm">
        <h2 class="text-xl font-bold mb-4 text-center">
          PENDAPATAN DARI USAHA
        </h2>
        <div
          class="grid grid-cols-10 gap-4 bg-slate-100 p-4 rounded-lg mb-2 text-slate-600 font-semibold"
        >
          <div class="col-span-4">Nama Produk</div>
          <div class="col-span-2">Kuantitas</div>
          <div class="col-span-2">Harga Jual (Rp)</div>
          <div class="col-span-2">Total (Rp)</div>
        </div>
        <div id="pendapatan-usaha-rows" class="space-y-2"></div>
        {% if not revenue_usaha %}
        <p class="text-center text-slate-500 p-4">Belum ada data pendapatan usaha.</p>
        {% endif %}
        {% for item in revenue_usaha %}
        <div class="text-right font-bold text-lg mt-6">
          Jumlah Penjualan Usaha <span id="jumlah-penjualan-usaha">Rp 0</span>
        </div>
        <hr class="my-10" />
        <h2 class="text-xl font-bold mb-4 text-center">PENDAPATAN LAIN LAIN</h2>
        <div
          class="grid grid-cols-10 gap-4 bg-slate-100 p-4 rounded-lg mb-2 text-slate-600 font-semibold"
        >
          <div class="col-span-8">Nama Produk</div>
          <div class="col-span-2">Total (Rp)</div>
        </div>
        <div id="pendapatan-lain-rows" class="space-y-2"></div>
        <div class="text-right font-bold text-lg mt-6">
          Jumlah Penjualan Lain Lain
          <span id="jumlah-penjualan-lain">Rp 0</span>
        </div>
        <div class="text-right mt-16">
          <button
            class="py-3 px-12 bg-[#8C705A] text-white font-semibold rounded-lg hover:bg-[#a1826a]"
          >
            Next
          </button>
        </div>
      </div>
    </main>
  </div>
  <div
    id="add-income-modal"
    class="fixed inset-0 bg-black/60 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
      <form id="income-form">
        <div class="mb-5">
          <label
            for="modal-product-name"
            class="block mb-2 font-semibold text-slate-600"
            >Nama produk</label
          ><input
            type="text"
            id="modal-product-name"
            placeholder="Nama Produk"
            class="w-full p-3 border border-slate-300 rounded-lg"
          />
        </div>
        <div id="modal-usaha-fields">
          <div class="mb-5">
            <label
              for="modal-quantity"
              class="block mb-2 font-semibold text-slate-600"
              >Kuantitas</label
            ><input
              type="number"
              id="modal-quantity"
              placeholder="Kuantitas Produk"
              class="w-full p-3 border border-slate-300 rounded-lg"
            />
          </div>
          <div class="mb-5">
            <label
              for="modal-price"
              class="block mb-2 font-semibold text-slate-600"
              >Harga Jual</label
            ><input
              type="number"
              id="modal-price"
              placeholder="Rp."
              class="w-full p-3 border border-slate-300 rounded-lg"
            />
          </div>
        </div>
        <div id="modal-lain-total-field" class="hidden mb-5">
          <label
            for="modal-total"
            class="block mb-2 font-semibold text-slate-600"
            >Total</label
          ><input
            type="number"
            id="modal-total"
            placeholder="Rp."
            class="w-full p-3 border border-slate-300 rounded-lg"
          />
        </div>
        <div class="mb-8">
          <label
            for="modal-data-type"
            class="block mb-2 font-semibold text-slate-600"
            >Jenis Data</label
          ><select
            id="modal-data-type"
            class="w-full p-3 border border-slate-300 rounded-lg bg-white"
          >
            <option value="usaha">Pendapatan Dari Usaha</option>
            <option value="lain-lain">Pendapatan Lain Lain</option>
          </select>
        </div>
        <button
          type="submit"
          class="w-full bg-[#4A5C51] text-white p-3 rounded-lg font-semibold text-lg mt-4 hover:bg-[#3a4a40]"
        >
          Selesai
        </button>
      </form>
    </div>
  </div>
  <div
    id="success-alert"
    class="fixed inset-0 bg-black/40 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center">
      <svg
        class="w-16 h-16 text-green-500 mx-auto mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <p class="text-lg font-semibold">data usaha berhasil terkirim</p>
    </div>
  </div>
  <div
    id="error-alert"
    class="fixed inset-0 bg-black/40 flex justify-center items-center z-50 transition-opacity opacity-0 pointer-events-none"
  >
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center">
      <svg
        class="w-16 h-16 text-red-500 mx-auto mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
        />
      </svg>
      <p class="text-lg font-semibold">
        Check ulang data usaha anda<br />Pastikan tidak ada yang kosong
      </p>
    </div>
  </div>
  <script src="{% static 'core/js/pendapatan.js' %}"></script>
</div>
{% endblock %}
